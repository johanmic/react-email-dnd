"use strict";(globalThis.webpackChunkreact_email_dnd_docs=globalThis.webpackChunkreact_email_dnd_docs||[]).push([[709],{6028:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>c,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"packages/editor/ui/canvas","title":"Canvas","description":"Understand how sections, rows, columns, and blocks render inside the editor viewport.","source":"@site/docs/packages/editor/ui/canvas.md","sourceDirName":"packages/editor/ui","slug":"/packages/editor/ui/canvas","permalink":"/docs/packages/editor/ui/canvas","draft":false,"unlisted":false,"editUrl":"https://github.com/johanmic/react-email-dnd/tree/main/docs/docs/packages/editor/ui/canvas.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Canvas","sidebar_position":2,"description":"Understand how sections, rows, columns, and blocks render inside the editor viewport."},"sidebar":"tutorialSidebar","previous":{"title":"Email Editor Shell","permalink":"/docs/packages/editor/ui/email-editor"},"next":{"title":"Sidebar Palette","permalink":"/docs/packages/editor/ui/sidebar"}}');var t=s(6106),o=s(9940);const c={title:"Canvas",sidebar_position:2,description:"Understand how sections, rows, columns, and blocks render inside the editor viewport."},r=void 0,d={},a=[{value:"Responsibilities",id:"responsibilities",level:2},{value:"Key pieces",id:"key-pieces",level:2},{value:"Working with the context",id:"working-with-the-context",level:2}];function l(e){const n={code:"code",h2:"h2",li:"li",p:"p",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"The canvas combines layout structure with block previews so authors can drag, drop, and manipulate content in-place. It is responsible for translating the JSON document into interactive React elements while keeping the shared state in sync."}),"\n",(0,t.jsx)(n.h2,{id:"responsibilities",children:"Responsibilities"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Render the current document tree (sections \u2192 rows \u2192 columns \u2192 blocks) with live previews of each block type."}),"\n",(0,t.jsx)(n.li,{children:"Register droppable zones so sidebar items and existing blocks can be reordered or inserted at precise positions."}),"\n",(0,t.jsx)(n.li,{children:"Surface tooling around each node\u2014lock toggles, visibility controls, delete confirmations, and drag handles."}),"\n",(0,t.jsx)(n.li,{children:"Respect editor options such as DaisyUI mode, colour highlighting depth, hidden block visibility, and unlockable settings."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"key-pieces",children:"Key pieces"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"Canvas"})," (",(0,t.jsx)(n.code,{children:"packages/editor/src/components/Canvas.tsx"}),") unwraps the document into nested React components and wires up the ",(0,t.jsx)(n.code,{children:"@dnd-kit"})," integrations."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"CanvasProvider"})," (",(0,t.jsx)(n.code,{children:"packages/editor/src/components/CanvasProvider.tsx"}),") supplies the canvas with selection state, document mutations, undo history, and utilities such as ",(0,t.jsx)(n.code,{children:"updateBlockProps"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Content block previews (",(0,t.jsx)(n.code,{children:"button.tsx"}),", ",(0,t.jsx)(n.code,{children:"text.tsx"}),", ",(0,t.jsx)(n.code,{children:"heading.tsx"}),", ",(0,t.jsx)(n.code,{children:"divider.tsx"}),", ",(0,t.jsx)(n.code,{children:"image.tsx"}),") render the authoring-time view for each block type while respecting DaisyUI or inline styles."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"ConfirmModal.tsx"})," provides the delete confirmation dialog that appears when removing sections, rows, columns, or blocks."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"working-with-the-context",children:"Working with the context"}),"\n",(0,t.jsxs)(n.p,{children:["Use ",(0,t.jsx)(n.code,{children:"useCanvasStore()"})," anywhere under ",(0,t.jsx)(n.code,{children:"CanvasProvider"})," to:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Read the latest ",(0,t.jsx)(n.code,{children:"document"}),", ",(0,t.jsx)(n.code,{children:"selectedBlock"}),", or ",(0,t.jsx)(n.code,{children:"selectedContainer"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Dispatch mutations like ",(0,t.jsx)(n.code,{children:"setDocument"}),", ",(0,t.jsx)(n.code,{children:"updateBlockProps"}),", ",(0,t.jsx)(n.code,{children:"updateContainerProps"}),", or ",(0,t.jsx)(n.code,{children:"upsertVariable"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Control editor behaviour (",(0,t.jsx)(n.code,{children:"selectBlock"}),", ",(0,t.jsx)(n.code,{children:"setPreviewMode"}),", ",(0,t.jsx)(n.code,{children:"save"}),", ",(0,t.jsx)(n.code,{children:"undo"}),", etc.)."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Reusing the shared context ensures selections stay in sync and all mutations go through the undo stack."})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},9940:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>r});var i=s(7378);const t={},o=i.createContext(t);function c(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);