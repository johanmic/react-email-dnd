"use strict";(globalThis.webpackChunkreact_email_dnd_docs=globalThis.webpackChunkreact_email_dnd_docs||[]).push([[292],{2314:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>i,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"packages/editor/basics","title":"Basics","description":"Package basics.md","source":"@site/docs/packages/editor/basics.md","sourceDirName":"packages/editor","slug":"/packages/editor/basics","permalink":"/docs/packages/editor/basics","draft":false,"unlisted":false,"editUrl":"https://github.com/johanmic/react-email-dnd/tree/main/docs/docs/packages/editor/basics.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"Basics","sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Concepts","permalink":"/docs/why"},"next":{"title":"Components","permalink":"/docs/packages/editor/components"}}');var t=n(6106),r=n(9940);const i={title:"Basics",sidebar_position:1},c=void 0,a={},d=[{value:"Layout shell",id:"layout-shell",level:3},{value:"Core data flow",id:"core-data-flow",level:3},{value:"Canvas context",id:"canvas-context",level:3},{value:"Lifecycle hooks",id:"lifecycle-hooks",level:3}];function l(e){const s={blockquote:"blockquote",code:"code",h3:"h3",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Package:"})," ",(0,t.jsx)(s.code,{children:"@react-email-dnd/editor"})," | ",(0,t.jsx)(s.strong,{children:"File:"})," ",(0,t.jsx)(s.code,{children:"basics.md"})]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"The Editor provides a drag-and-drop surface for assembling email layouts. At a high level it:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"loads a catalog of components the author can drop into the layout tree,"}),"\n",(0,t.jsx)(s.li,{children:"tracks the selection state and exposes property panels for the focused node, and"}),"\n",(0,t.jsx)(s.li,{children:"persists changes back to the shared JSON document."}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"layout-shell",children:"Layout shell"}),"\n",(0,t.jsx)(s.p,{children:"The UI is split across three persistent regions so authors never lose context:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Sidebar"})," \u2014 lists every available block, variable, and document outline entry. It drives drag-and-drop and quick navigation."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Canvas"})," \u2014 shows the live document with drag handles, drop indicators, and keyboard shortcuts for rearranging content."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Properties panel"})," \u2014 renders smart forms for the selected block, section, row, or column. It synchronizes with the shared schema and exposes variables, uploads, and conditional props."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Header"})," \u2014 surfaces document-level actions such as undo/redo, preview mode toggles, save state, and custom buttons you register."]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"Each area consumes the same store, so selections, preview mode changes, and async uploads stay synchronized regardless of where they originate."}),"\n",(0,t.jsx)(s.h3,{id:"core-data-flow",children:"Core data flow"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Component palette"})," \u2014 A curated set of blocks is serialized as JSON. Each block entry contains a ",(0,t.jsx)(s.code,{children:"type"}),", default props, and metadata such as visibility rules or grouping."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Canvas"})," \u2014 Dropping a block creates a node instance. The editor normalizes props, assigns a unique ",(0,t.jsx)(s.code,{children:"id"}),", and inserts the node into the JSON tree at the target index."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Inspector panels"})," \u2014 When a node is selected, the editor renders property forms driven by component schemas. Prop updates are written back to the same JSON document incrementally."]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"Because everything is expressed as JSON, the editor can use optimistic updates, undo stacks, and collaborative cursors without requiring schema transforms."}),"\n",(0,t.jsx)(s.h3,{id:"canvas-context",children:"Canvas context"}),"\n",(0,t.jsxs)(s.p,{children:["All editor components sit inside the ",(0,t.jsx)(s.code,{children:"CanvasProvider"}),", which exposes a strongly typed React context. You can tap into it with the ",(0,t.jsx)(s.code,{children:"useCanvasStore()"})," hook to:"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["Inspect the current ",(0,t.jsx)(s.code,{children:"document"}),", ",(0,t.jsx)(s.code,{children:"selectedBlock"}),", or ",(0,t.jsx)(s.code,{children:"selectedContainer"}),"."]}),"\n",(0,t.jsxs)(s.li,{children:["Dispatch mutations such as ",(0,t.jsx)(s.code,{children:"setDocument"}),", ",(0,t.jsx)(s.code,{children:"updateBlockProps"}),", ",(0,t.jsx)(s.code,{children:"setPreviewMode"}),", or ",(0,t.jsx)(s.code,{children:"upsertVariable"}),"."]}),"\n",(0,t.jsxs)(s.li,{children:["Wire custom buttons in the header that call ",(0,t.jsx)(s.code,{children:"save()"})," or perform side-effectful actions."]}),"\n",(0,t.jsxs)(s.li,{children:["Provide your own ",(0,t.jsx)(s.code,{children:"uploadFile"})," handler or inject runtime ",(0,t.jsx)(s.code,{children:"variables"})," that show up in block inspectors."]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"Because the context is public, you can compose your own UI around the editor\u2014render read-only previews, trigger analytics, or synchronize with collaboration backends\u2014without forking the core package."}),"\n",(0,t.jsx)(s.h3,{id:"lifecycle-hooks",children:"Lifecycle hooks"}),"\n",(0,t.jsx)(s.p,{children:"Use editor lifecycle hooks to extend behavior:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"onChange(document)"})," fires for any structural or prop change."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"onSelect(nodeId)"})," exposes the currently selected node."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"onPaletteSearch(query)"})," lets you inject custom search/filter logic for large catalogs."]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"Hooks should remain pure\u2014returning new state or calling provided callbacks\u2014so that the editor can orchestrate undo/redo and multi-user synchronization deterministically."})]})}function h(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},9940:(e,s,n)=>{n.d(s,{R:()=>i,x:()=>c});var o=n(7378);const t={},r=o.createContext(t);function i(e){const s=o.useContext(r);return o.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),o.createElement(r.Provider,{value:s},e.children)}}}]);